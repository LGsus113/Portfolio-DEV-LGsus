---
import {
  getDeveloperExperiencesGrouped,
  getOtherExperiences,
} from "@/type-script/experience-service";
import SectionScheme from "@/utils/Section-Scheme.astro";
import ItemExperience from "@/utils/Item-WSVA.astro";
import type { GroupedExperience, ExperienceProps } from "@/type-script/type";

const developer: GroupedExperience[] = await getDeveloperExperiencesGrouped();
const atteClient: ExperienceProps[] = await getOtherExperiences("AtteClient");
const technical: ExperienceProps[] = await getOtherExperiences("Technical");

const titleClass = "mt-2 text-xl font-semibold text-black";
---

<SectionScheme id="experiencia" className="pb-10 gap-4">
  <header>
    <h1 class="text-2xl text-black font-bold">Experiencia</h1>
  </header>
  <div class="text-gray-900 list-none flex flex-col gap-4">
    <h1 class={titleClass}>- Software:</h1>
    {
      developer.map((group) => (
        <section class="pl-4 mb-2">
          <h2 class="text-lg font-semibold underline mb-3">
            {group.badge}
          </h2>
          <ul class="flex flex-col gap-3 pl-4">
            {group.items.map((exp) => (
              <li>
                <ItemExperience
                  name={exp.title}
                  position={exp.badge}
                  years={exp.date}
                  summary={exp.description}
                />
              </li>
            ))}
          </ul>
        </section>
      ))
    }
    <h1 class={titleClass}>- Atención al cliente:</h1>
    <ul class="flex flex-col gap-3 pl-4">
      {
        atteClient.map((exp) => (
          <li>
            <ItemExperience
              name={exp.title}
              position={exp.badge}
              years={exp.date}
              summary={exp.description}
            />
          </li>
        ))
      }
    </ul>
    <h1 class={titleClass}>- Técnico:</h1>
    <ul class="flex flex-col gap-3 pl-4">
      {
        technical.map((exp) => (
          <li>
            <ItemExperience
              name={exp.title}
              position={exp.badge}
              years={exp.date}
              summary={exp.description}
            />
          </li>
        ))
      }
    </ul>
  </div>
</SectionScheme>
