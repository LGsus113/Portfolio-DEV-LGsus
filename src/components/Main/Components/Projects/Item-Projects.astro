---
import Button from "@/utils/Button.astro";
import GitHub from "@/icons/github.astro";
import { projects } from "@cv";
import { skillIcons } from "@/type-script/skills-icon";
import { landings } from "@/type-script/landings-image";

const PROJECTS = projects;
---

{
  PROJECTS.map(({ name, description, github, technologies }) => (
    <article
      class="flex flex-col gap-5 items-center project"
      data-tech={technologies.join(",")}
    >
      <div class="w-full h-auto flex flex-col gap-1">
        <h3 class="text-2xl xl:text-3xl text-green-300 time-line-scroll-animation">{name}</h3>
        <p class="text-base xl:text-lg xl:text-justify text-gray-500 time-line-scroll-animation">
          {description}
        </p>
      </div>
      <div class="w-full xl:h-[55vh] relative overflow-hidden flex items-center rounded-xl shadow-md shadow-purple-400/30 group">
        <img
          src={landings[name].src}
          alt={`Captura de pantalla del proyecto ${name}`}
          class="w-full h-full object-cover group-hover:scale-105 transition-all duration-300 ease-in-out"
        />
        <ul class="absolute top-1 left-1 lg:top-5 lg:left-5 flex flex-wrap justify-start gap-2 text-white">
          {technologies.map((tech) => {
            const Icon = skillIcons[tech];
            return (
              <li>
                <span class="w-auto h-auto flex flex-1 gap-1 xl:gap-2 text-lg items-center justify-center px-4 py-1.5 bg-purple-900/[.9] rounded-full shadow-inner shadow-purple-300/[.5]">
                  {Icon && <Icon class="size-6 sombra-3d" />}
                  {tech}
                </span>
              </li>
            );
          })}
        </ul>
        <footer class="absolute bottom-1 right-1 lg:bottom-5 lg:right-5">
          <Button link={github} title="Github">
            <GitHub class="size-5 me-3.5" />
          </Button>
        </footer>
      </div>
    </article>
  ))
}

<script>
  import { initProjectFilter } from "@/type-script/skills-icon";
  initProjectFilter();
</script>
