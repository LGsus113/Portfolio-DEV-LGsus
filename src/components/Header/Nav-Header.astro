---
import LGsusLogo from "@/components/Header/Components/Logo.astro";
import ListNav from "@/components/utils/List-Nav.astro";
import Hovered from "@/components/utils/Hovered.astro";

const data = [
  {
    label: "Inicio",
    href: "#top",
  },
  {
    label: "Experiencia",
    href: "#experiencia",
  },
  {
    label: "Sobre MÃ­",
    href: "#sobre-mi",
  },
  {
    label: "Proyectos",
    href: "#proyectos",
  },
  {
    label: "Contactame",
    href: "#contactame",
  },
];
---

<header
  id="LGsus-Portfolio"
  class="w-full h-auto xl:w-[1420px] flex flex-col md:flex-row justify-between items-center fixed top-0 z-50 p-4 rounded-sm transition-all duration-300 ease-in-out"
>
  <LGsusLogo />
  <nav class="mt-10 md:mt-0 md:ml-10">
    <ListNav items={data} variant="default" />
  </nav>
  <Hovered items="#LGsus-Portfolio nav li" container="#LGsus-Portfolio" />
</header>

<script>
  const $header = document.querySelector("#LGsus-Portfolio") as HTMLElement;

  const observerOptions = {
    root: null,
    rootMargin: "0px",
    threshold: 0.1,
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach((entry) => {
      const { isIntersecting } = entry;

      if (isIntersecting) {
        $header.classList.remove("backdrop-blur-sm");
      } else {
        $header.classList.add("backdrop-blur-sm");
      }
    });
  }, observerOptions);

  const $sections = document.querySelectorAll("#mainSection section");
  $sections.forEach((section) => observer.observe(section));
</script>
